---
title: ğŸ”® ì†Œë§ˆë²• í”„ë¡œì íŠ¸ -2 (calculator)
date: 2020-03-01 20:03:64
category: project
draft: false
---

ë§¨ì²˜ìŒ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ TodoList ë³´ë‹¤ ë” ê¸°ë³¸ì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ê³„ì‚°ê¸°ë¥¼ íƒí–ˆë‹¤.

> ëª¨ë“  ì—°ì‚°ì€ ë§ì…ˆ ëº„ì…ˆìœ¼ë¡œ ì´ë¤„ì§„ë‹¤..!

<hr/>

```toc
exclude: Table of Contents
from-heading: 1
to-heading: 6
```

# \#. Project Map

- :apple: <a href="https://small-magic-project.now.sh/" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸</a>

- :apple: <a href="https://small-magic-project.now.sh/calculator" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸/calculator</a>

* :fire: <a href="https://github.com/taenykim/small-magic-project" target="_blank">í”„ë¡œì íŠ¸ ê¹ƒí—ˆë¸Œì†ŒìŠ¤</a>

<br/>

> ì œì‘ë…¸íŠ¸

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 1 (container)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B81/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 2 (calculator)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B82/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 3 (graph)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B83/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 5 (today)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B85/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 6 (jjal)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B86/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 7 (avengers)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B87/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 8 (maskmap)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B88/)

# 1. ë ˆì´ì•„ì›ƒ

![](./images/calculator.png)

## 1-1. ë ˆì´ì•„ì›ƒ1 (flex)

ì „ì²´ containerëŠ” pixelë¡œ ê³ ì •ì ì¸ í¬ê¸°ë¥¼ ì¡ì•„ì£¼ì—ˆê³ 

ìš”ì†Œ ë°°ì¹˜ ë ˆì´ì•„ì›ƒì€ flex boxë¡œ ì¡ì•„ë³´ì•˜ë‹¤.

> ë¹ ..ë„!

:hatched_chick: ë ˆì´ì•„ì›ƒì€ ë‚´ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ì¡í˜”ëŠ”ë° ë°‘ì— 0, ., = ë²„íŠ¼ì´ ì‚´ì§ ë§ì§€ ì•Šì•˜ë‹¤.

flex containerì˜ ìì‹ ì†ì„±ìœ¼ë¡œ ìƒëŒ€ì ì¸ í¬ê¸°ë¥¼ ë§ì¶”ê¸° ìœ„í•´ ë‚˜ë¨¸ì§€ ë²„íŠ¼ë“¤ì„ `flex : 1`ë¡œ ì£¼ê³  0ë²„íŠ¼ë§Œ `flex : 2`ë¡œ ì£¼ì—ˆëŠ”ë° ìš”ì†Œë“¤ì˜ ìƒëŒ€ì  í¬ê¸°ì— marginê°’ë„ í¬í•¨í•˜ë©´ì„œ ë”±ë§ëŠ” ë ˆì´ì•„ì›ƒì´ ë‚˜ì˜¤ì§€ ì•Šì€ ê²ƒ ê°™ë‹¤. ê·¼ë° ë””ìì¸ìì²´ë¡œ ê·¸ë ‡ê²Œ ë‚˜ì˜ì§€ ì•Šë‹¤ëŠ” í•©ë¦¬í™”ë¡œ ê·¸ëƒ¥ ë‘ì—ˆë‹¤.

> ë²½ëŒì‹.. ë ˆì´ì•„ì›ƒ.. masonry ë””ìì¸ì´ì—ìš”..

## 1-2. ë ˆì´ì•„ì›ƒ2 (ê°’ì— ëŒ€í•œ ë·° 2ê°œ!)

![](./images/calculator2.png)

ì¼ë°˜ì ì¸ ê³„ì‚°ê¸°ëŠ” result ê°’ê³¼ í˜„ì¬ ì…ë ¥ê°’ì„ ë³´ì—¬ì£¼ëŠ” displayê°€ 1ê°œì¡´ì¬í•œë‹¤.

ì¦‰, í˜„ì¬ì…ë ¥ê°’ì„ ë³´ì—¬ì¤„ ë•ŒëŠ” í˜„ì¬ ì €ì¥ë˜ì–´ìˆëŠ” resultê°’ì„ ë³¼ ìˆ˜ ì—†ë‹¤ëŠ” `ë¶ˆí¸í•œ ì `ì´ ìˆì—ˆë‹¤.

ê·¸ë˜ì„œ ê°’ì— ëŒ€í•œ display ë·°ë¥¼

> 1. **ì €ì¥ëœ** resultê°’ + ì…ë ¥í•œ operator ë¥¼ ë³´ì—¬ì£¼ëŠ” ë·°

> 2. í˜„ì¬ ì…ë ¥ê°’ í˜¹ì€ ìµœì¢… ê²°ê³¼ê°’ì„ ë³´ì—¬ì£¼ëŠ” ë·°

ë‘ê°œë¥¼ ë§Œë“¤ì—ˆë‹¤.

## 1-3. :star: title View (display1)

> Titleì€ styled-componentì´ë‹¤.

```jsx
<Title>
  {tempResult + (pressedOperator === 'equal' ? '' : pressedOperator) ||
    'Calculator'}
</Title>
```

tempResultëŠ” ì €ì¥ëœ ê°’ì´ê³ , ì´ˆê¸° tempResult ê°’ì€ ''ë¡œ, ì €ì¥ëœ ê°’ì´ ì—†ì„ ê²½ìš° 'Calculator'ê°€ ì°íˆë„ë¡ í•˜ì˜€ë‹¤.

## 1-4. :star: result View (display2)

> ResultContainer, ResultText, ResultNumberëŠ” styled-componentì´ë‹¤.

```jsx
<ResultContainer>
  <ResultText>Result</ResultText>
  <ResultNumber>{result}</ResultNumber>
</ResultContainer>
```

ê·¸ë¦¬ê³  ì „ì²´ ê²°ê³¼ê°’ í˜¹ì€ í˜„ì¬ ì…ë ¥ê°’ resultì˜ ë·°ë„ êµ¬ì„±í•´ì£¼ì—ˆë‹¤.

# 2. ìƒíƒœê´€ë¦¬

```jsx
const data = useSelector(state => state.calculator)
const [result, setResult] = useState(data.result || '0')
const [tempResult, setTempResult] = useState(data.tempResult || '')
const [pressedOperator, setPressedOperator] = useState(
  data.pressedOperator || ''
)
const [isFirstNumberTyping, setIsFirstNumberTyping] = useState(
  data.isFirstNumberTyping || false
)
```

## 2-1. ë¦¬ì•¡íŠ¸ hooks

ì»´í¬ë„ŒíŠ¸ë¥¼ class ê°€ ì•„ë‹Œ `í•¨ìˆ˜í˜•`ìœ¼ë¡œ êµ¬ì„±í•˜ê³  `í´ë¡œì €, hooks`ë¥¼ ì´ìš©í•´ì„œ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œì˜ ìƒíƒœê´€ë¦¬ë¥¼ í•˜ì˜€ë‹¤.

ìƒíƒœë³€ìˆ˜ëŠ”

> 1. `result` : í˜„ì¬ ì…ë ¥ê°’ || ìµœì¢… ê²°ê³¼ ê°’

> 2. `tempResult` : ì €ì¥ëœ ê²°ê³¼ê°’

> 3. `pressedOperator` : ì €ì¥ëœ operator

> 4. `isFirstNumberTyping` : operandë¥¼ ì²˜ìŒì¹˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë³€ìˆ˜

## 2-2. :star: isFirstNumberTyping ë³€ìˆ˜

ê³„ì‚°ê¸°ì—ì„œ numberë¥¼ ì…ë ¥í•˜ë©´ stringì„ ë”í•˜ë“¯ì´ ë‚˜ì™€ì•¼í•œë‹¤.

> 1 + 1 => 11

í•˜ì§€ë§Œ ì²˜ìŒ ì´ˆê¸°ê°’ì€ 0ì¸ë° ìœ„ì²˜ëŸ¼ ì…ë ¥í•˜ë©´

> 0 + 1 => not 1 but 01

ì´ í™”ë©´ì— ì¶œë ¥ëœë‹¤.

ì´ í˜„ìƒì„ ë§‰ê¸° ìœ„í•´ì„œ isFirstNumberTyping ë³€ìˆ˜ë¥¼ ë‘ê³  ì²˜ìŒ ì…ë ¥ì‹œì—ëŠ” ì²˜ìŒ ì…ë ¥í•œ numberê°€ ê²°ê³¼ê°’ì— ë“¤ì–´ê°€ë„ë¡ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

> ë¬¼ë¡  ì²« íƒ€ì´í•‘ numberê°€ 0ì¼ ê²½ìš°ì˜ ì¡°ê±´ì²´í¬ë„ í•´ì¤¬ë‹¤.

## 2-3. ë¦¬ë•ìŠ¤ hooks

ì²˜ìŒ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì„±í•  ë•Œ, calculator reducerì˜ ì´ˆê¸°ê°’ì„ ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •í–ˆë‹¤.

ê·¸ë¦¬ê³  ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì“°ê¸° ìœ„í•´ ì´ ê³„ì‚°ê¸° ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì ì‹œ Dockerì— ë„£ì—ˆì„ ë•Œ, í˜„ì¬ ë¦¬ì•¡íŠ¸ stateë¥¼ ë¦¬ë•ìŠ¤ stateë¡œ ì˜®ê¸°ë„ë¡ ì„¤ì •í–ˆë‹¤.

ì¦‰, í•´ë‹¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ state ì¡°ì‘ì€ ë¦¬ì•¡íŠ¸ë¡œ,

í•´ë‹¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ state ì„ì‹œì €ì¥( Docker ë„˜ê¸°ê¸° )ì€ ë¦¬ë•ìŠ¤ë¡œ í•˜ì˜€ë‹¤.

# 3. ì´ë²¤íŠ¸ì²˜ë¦¬

> CaculatorButtonRowëŠ” styled-componentì´ë‹¤.

```jsx
<CaculatorButtonRow>
  <button
    name="1"
    type="button"
    onClick={e => buttonClickHandler(e.target.name)}
  >
    1
  </button>
  <button
    name="2"
    type="button"
    onClick={e => buttonClickHandler(e.target.name)}
  >
    2
  </button>
  <button
    name="3"
    type="button"
    onClick={e => buttonClickHandler(e.target.name)}
  >
    3
  </button>
  <button
    className="rightButton"
    name="multiple"
    type="button"
    onClick={e => buttonClickHandler(e.target.name)}
  >
    *
  </button>
</CaculatorButtonRow>
```

## 3-1. click ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (buttonClickHandler)

ê³„ì‚°ê¸° ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ìˆëŠ” ëª¨~ë“  ë²„íŠ¼ì˜ click ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ í•¨ìˆ˜ëŠ” `buttonClickHandler` í•¨ìˆ˜ë¡œ í†µì¼ ì‹œì¼œì£¼ì—ˆë‹¤.

ë²„íŠ¼ë§ˆë‹¤ nameì„ ì ì–´ì£¼ê³  e.target.nameì„ í•¨ìˆ˜ì— ì „ë‹¬í•´ì¤Œìœ¼ë¡œì„œ, í•´ë‹¹ í•¨ìˆ˜ì—ì„œ ì „ë‹¬ë°›ì€ ê°’ì— ë”°ë¼ ë¡œì§ì„ ì²˜ë¦¬í•˜ê²Œë” í•´ì£¼ì—ˆë‹¤.

```js
const buttonClickHandler = button_type => {
  if (button_type === 'reset') {
    setResult('0')
    setTempResult('')
    setPressedOperator('')
  } else if (button_type === 'delete') {
    if (result === '0') return
    result.length === 1
      ? (setResult('0'), setIsFirstNumberTyping(true))
      : setResult(result.substr(0, result.length - 1))
  } else if (button_type === 'plus') {
    const block_result = operating(pressedOperator)
    setTempResult(block_result)
    setPressedOperator('plus')
    setIsFirstNumberTyping(true)

    if (pressedOperator !== '') {
      setResult(block_result)
    }
  } else if (button_type === 'minus') {
    const block_result = operating(pressedOperator)
    setTempResult(block_result)
    setPressedOperator('minus')
    setIsFirstNumberTyping(true)

    if (pressedOperator !== '') {
      setResult(block_result)
    }
  } else if (button_type === 'multiple') {
    const block_result = operating(pressedOperator)
    setTempResult(block_result)
    setPressedOperator('multiple')
    setIsFirstNumberTyping(true)

    if (pressedOperator !== '') {
      setResult(block_result)
    }
  } else if (button_type === 'divide') {
    const block_result = operating(pressedOperator)
    setTempResult(block_result)
    setPressedOperator('divide')
    setIsFirstNumberTyping(true)

    if (pressedOperator !== '') {
      setResult(block_result)
    }
  } else if (button_type === 'equal') {
    const block_result = operating(pressedOperator)
    setTempResult(block_result)
    setPressedOperator('equal')
    setIsFirstNumberTyping(true)
    if (pressedOperator !== '') {
      setResult(block_result)
    }
  } else if (button_type === 'period') {
    if (result.indexOf('.') < 0) {
      setResult(result + '.')
    }
    setIsFirstNumberTyping(false)
  } else if (button_type === 'toggleSign') {
    setResult(result[0] === '-' ? result.substr(1) : '-' + result)
  } else if (
    button_type === '1' ||
    '2' ||
    '3' ||
    '4' ||
    '5' ||
    '6' ||
    '7' ||
    '8' ||
    '9' ||
    '0'
  ) {
    if (isFirstNumberTyping) {
      setResult(button_type)
      setIsFirstNumberTyping(false)
    } else {
      result[0] === '0'
        ? setResult(button_type)
        : setResult(result + button_type)
    }
  }
}
```

## 3-2. :star: operating í•¨ìˆ˜

```jsx
const operating = operator_type => {
  if (operator_type === 'plus')
    return String(Number(tempResult) + Number(result))
  else if (operator_type === 'minus')
    return String(Number(tempResult) - Number(result))
  else if (operator_type === 'multiple')
    return String(
      tempResult === '' ? Number(result) : Number(tempResult) * Number(result)
    )
  else if (operator_type === 'divide')
    return String(
      tempResult === '' ? Number(result) : Number(tempResult) / Number(result)
    )
  else return String(Number(result))
}
```

ê³„ì‚°ê¸° í”„ë¡œê·¸ë¨ì€ numberë¥¼ ì…ë ¥í•˜ê³  operatorë¥¼ ì…ë ¥í•˜ê³  ë‹¤ìŒ numberë¥¼ ì…ë ¥í•˜ëŠ” ì‹ìœ¼ë¡œ ê°’ì„ ê³„ì‚°í•œë‹¤.

> 1 + 3 \* 2 ì‹ìœ¼ë¡œ ëˆ„ë¥´ë©´ 7ì´ ì•„ë‹ˆë¼, 8ì´ ë‚˜ì˜´.

ì¦‰, 1 + 3 ê¹Œì§€ ëˆ„ë¥´ê³  \*ë¥¼ ëˆŒë €ì„ ë•Œ, í”„ë¡œê·¸ë¨ì€ \*ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ +ë¥¼ ìˆ˜í–‰í•˜ê³  \*ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê³„ì‚°í•´ì•¼í•œë‹¤.

ê·¸ë˜ì„œ e.target.nameì— operatorê°€ ë“¤ì–´ì˜¤ë©´ ì €ì¥ëœ operatorë¥¼ í†µí•´ì„œ operating í•¨ìˆ˜ë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ê²Œë” í•˜ì˜€ë‹¤.

# 4. ê°œì¸ì ì¸ í”¼ë“œë°±

## 4-1. flex layout

ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´, 0ë²„íŠ¼ì´ ë²„íŠ¼ ë‘ê°œì˜ í¬ê¸°ë§Œí¼ ë“¤ì–´ë§ì§€ëŠ” ì•ŠëŠ”ë‹¤.

## 4-2. , ì½¤ë§ˆ

ìˆ«ìê°€ ì„¸ìë¦¬ìˆ˜ë¥¼ ì´ˆê³¼í•  ë•Œë§ˆë‹¤ ,ë¥¼ ì°ëŠ” ê¸°ëŠ¥ì´ ì—†ë‹¤.

> ex) 1,000,000

ê³„ì‚°ê¸°ì˜ period(ì ), ë¶€í˜¸ ë“±ì€ ëª¨ë‘ ê°’ì˜ length ë³€í™”ë¥¼ ì¤€ë‹¤. í•˜ì§€ë§Œ ,(ì½¤ë§ˆ)ë¥¼ ë„£ìœ¼ë ¤ë©´ ì´ëŸ° length ë³€í™”ì— ë”°ë¥¸ ì²˜ë¦¬ë¥¼ ë‹¤ì‹œ í•´ì¤˜ì•¼í•˜ëŠ”ë° í•˜ì§€ ì•Šì•˜ë‹¤.
