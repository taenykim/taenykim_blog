---
title: ğŸ”® ì†Œë§ˆë²• í”„ë¡œì íŠ¸ -11 (music)
date: 2020-04-14 16:04:33
category: project
draft: false
---

**ë®¤ì§ í”Œë ˆì´ì–´ ì•±**ì„ ê°„ë‹¨íˆ ë§Œë“¤ì–´ë³´ì•˜ë‹¤. audio DOM elementë¥¼ ì²˜ìŒ ë‹¤ë¤„ë³´ì•˜ê³ , classë¥¼ í™œìš©í•´ OOPë„ ì‹ ê²½ì¨ì„œ êµ¬í˜„í•´ë³´ì•˜ë‹¤.

<hr/>

```toc
exclude: Table of Contents
from-heading: 1
to-heading: 2
```

# \#. Project Map

- :apple: <a href="https://small-magic-project.now.sh/" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸</a>

- :apple: <a href="https://small-magic-project.now.sh/music" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸/music</a>

* :fire: <a href="https://github.com/taenykim/small-magic-project" target="_blank">í”„ë¡œì íŠ¸ ê¹ƒí—ˆë¸Œì†ŒìŠ¤</a>

<br/>

<details>
<summary>ì œì‘ë…¸íŠ¸ í•œëˆˆì—ë³´ê¸°[ì ‘ê¸°/í¼ì¹˜ê¸°]</summary>
<div markdown="1">

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 1 (container)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B81/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 2 (calculator)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B82/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 3 (graph)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B83/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 5 (today)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B85/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 6 (jjal)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B86/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 7 (avengers)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B87/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 8 (maskmap)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B88/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 9 (loading)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B89/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 10 (lazyloading)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B810/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 11 (music)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B811/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 12 (racingcar)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B812/)

</div>
</details>

# 1. Layout

### 1-1. ë©”ì¸í™”ë©´

![](./images/music1.png)

í™”ë©´ ì¤‘ì•™ì—ëŠ” Play/Stop ë²„íŠ¼ê³¼ ì–‘ì˜†ìœ¼ë¡œëŠ” ì´ì „ê³¡ ë²„íŠ¼, ë‹¤ìŒê³¡ ë²„íŠ¼ì„ ë‘ì—ˆë‹¤.

<hr/>

### 1-2. ğŸµìŒì•…ì¬ìƒì¤‘

![](./images/music2.png)

ê·¸ë¦¬ê³  ìŒì•…ì´ ì¬ìƒì¤‘ì¼ ë•ŒëŠ” ë°°ê²½ ê·¸ë¼ë””ì–¸íŠ¸ ì• ë‹ˆë©”ì´ì…˜ì´ ë³´ì´ë„ë¡ í•´ì£¼ì—ˆë‹¤.

<hr/>

### 1-3. ì»´í¬ë„ŒíŠ¸

```jsx
<BackgroundContainer className="musicBackground" playToggle={playToggle}>
  <ContentsMenubar name="music" />
  <audio preload="auto" controls="none" style={{ display: 'none' }}></audio>
  <SideButton position="left" onClick={() => anotherMusicPlay('left')} />
  <PlayButton onClick={playMusic}>
    <div>{myMusic.name}</div>
    <p>{!playToggle ? `PLAY` : `STOP`}</p>
  </PlayButton>
  <SideButton position="right" onClick={() => anotherMusicPlay('right')} />
</BackgroundContainer>
```

| Component              | Description                                           |
| ---------------------- | ----------------------------------------------------- |
| BackgroundContainer    | í•´ë‹¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ Full Container `styled-component` |
| ContentsMenubar        | ë©”ë‰´ë°” `import`                                       |
| audio                  | ìŒì•… ê´€ë ¨ html element `HTMLAudioElement`             |
| SideButton, PlayButton | ë²„íŠ¼ element `styled-component`                       |

# 2. Sound Class

ë¨¼ì € ìŒì•…ì„ ì»¨íŠ¸ë¡¤ í•´ì¤„ classë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.

```js
export default class Sound {
  sound = null // HTMLAuioElement
  name = ''
  constructor(src) {
    this.sound = document.querySelector('audio')
    this.name = src
    this.sound.src = src
  }
  play() {
    this.sound.play()
  }
  stop() {
    this.sound.pause()
  }
}
```

stateë¡œëŠ” HTMLAudioElementì— ì ‘ê·¼í•˜ëŠ” soundì™€ ìŒì•…ì´ë¦„ nameì„ ë‘ì—ˆê³ , ëª¨ë“  ìŒì•… ì»¨íŠ¸ë¡¤ì„ Soundê°ì²´ì—ì„œ í•  ìˆ˜ ìˆê²Œë” í•´ì£¼ì—ˆë‹¤.

# 3. Sound Control

### 3-1. Sound ê°ì²´ ìƒì„±

```jsx
const musics = ['1Upbeat Ukulele.mp3', '2Instrumental.mp3', '3Inspiration.mp3']
```

ë¨¼ì € musics ë°°ì—´ì— ìŒì•… ì´ë¦„ì„ ë„£ì–´ì£¼ì—ˆë‹¤.

```jsx
useEffect(() => {
  setMyMusic(new Sound(musics[0]))
}, [])
```

ê·¸ë¦¬ê³  ì²˜ìŒ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ, Sound ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ìƒì„±ì ì¸ìë¡œ ì²«ë²ˆì§¸ ìŒì•… ('1Upbeat Ukulele.mp3')ì„ ë„£ì–´ì£¼ì—ˆë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ê°ì²´ë¥¼ React Hooksì˜ useStateë¥¼ ì´ìš©í•´ì„œ MyMusic stateì— ë„£ì–´ì£¼ì—ˆë‹¤.

<hr/>

### 3-2. ìŒì•…ì¬ìƒ

```jsx
const playMusic = () => {
  !playToggle && myMusic.play()
  playToggle && myMusic.stop()
  setPlayToggle(!playToggle)
}
```

playMusic í•¨ìˆ˜ëŠ” ê°€ìš´ë° Play/Stop ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë¡œ, í˜„ì¬ playToggle ê°’ì— ë”°ë¼, myMusic ì˜ ë©”ì†Œë“œì— ì ‘ê·¼í•˜ê²Œ í•´ì£¼ì—ˆë‹¤.

<hr/>

### 3-3. ë‹¤ìŒê³¡, ì´ì „ê³¡

```jsx
const anotherMusicPlay = direction => {
  myMusic.stop()
  if (direction === 'left') {
    return setMyMusic(
      new Sound(
        musics[
          (musics.indexOf(myMusic.name) + musics.length - 1) % musics.length
        ]
      )
    )
  }
  if (direction === 'right') {
    return setMyMusic(
      new Sound(musics[(musics.indexOf(myMusic.name) + 1) % musics.length])
    )
  }
}
```

anotherMusicPlay í•¨ìˆ˜ëŠ” ì‚¬ì´ë“œë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì‹¤í–‰ë˜ë©°, directionì´ë¼ëŠ” ì¸ì(ì´ì „ê³¡ì¸ì§€,ë‹¤ìŒê³¡ì¸ì§€ ì²´í¬)ë¥¼ ë°›ëŠ”ë‹¤. ìš°ì„  í˜„ì¬ myMusic ê°ì²´ì˜ ìŒì•…ì„ ë©ˆì¶”ê³  ì¸ìì— ë”°ë¥¸ ì¡°ê±´ë¬¸ì„ ë‘ì—ˆë‹¤. ì¡°ê±´ë¬¸ì€ elseë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ifì™€ return ê°’ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ì—ˆë‹¤.

```jsx
useEffect(() => {
  playToggle && myMusic.play()
}, [myMusic])
```

ë‹¤ìŒê³¡ í˜¹ì€ ì´ì „ê³¡ìœ¼ë¡œ ê°ì²´ê°€ ë°”ë€Œë©´ useEffectë¥¼ ì´ìš©í•´ì„œ ìŒì•…ì„ í”Œë ˆì´í• ì§€ ê³„ì† ìœ ì§€í•  ê²ƒì¸ì§€ ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.

# 4. Background Animation

ë°±ê·¸ë¼ìš´ë“œ ì• ë‹ˆë©”ì´ì…˜ì€ styled-component ë¥¼ ì´ìš©í–ˆê³ , [codepen.io](https://codepen.io/nohoid/pen/kIfto)ì˜ ì†ŒìŠ¤ë¥¼ ì°¸ê³ í•˜ì˜€ë‹¤.

```jsx
const rainbow = keyframes`
0%{background-position:0% 82%}
50%{background-position:100% 19%}
100%{background-position:0% 82%}
`

const BackgroundContainer = styled.div`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100vw;
  height: 100vh;
  background: ${(props) => {
    return props.playToggle
      ? 'linear-gradient(124deg,#ff2400,#e81d1d,#e8b71d,#e3e81d,#1de840,#1ddde8,#2b1de8,#dd00f3,#dd00f3);'
      : 'white'
  }}
  background-size: 1800% 1800%;
  animation: ${rainbow} 18s ease infinite;
```

# 5. Feedback

### 5-1. Too simple

ë§Œë“¤ê³ ë‚˜ë‹ˆ ë„ˆë¬´ ê°„ë‹¨í–ˆë˜ ê²ƒ ê°™ë‹¤. ê·¸ë˜ì„œ ë‹¤ìŒì—ëŠ” ì›¹ì—ì„œ í•  ìˆ˜ ìˆëŠ” ë“œëŸ¼ì´ë‚˜ ì‹ ë””ì‚¬ì´ì € ì–´í”Œì´ë‚˜ ì •ë§ ë®¤ì§ í”Œë ˆì´ì–´ ì²˜ëŸ¼ ì—¬ëŸ¬ ê¸°ëŠ¥ë“¤ì„ ë„£ì–´ë³´ê³  ì‹¶ë‹¤.

<hr/>

### 5-2. Animation

ì• ë‹ˆë©”ì´ì…˜ ê¸°ëŠ¥ë„ ë²„íŠ¼ì— ë°˜ì‘í•˜ë„ë¡ í•˜ê³  ì‹¶ì—ˆëŠ”ë° ì¢€ì²˜ëŸ¼ ì‰½ê²Œ ë˜ì§€ ì•Šì•˜ë‹¤. ì¤‘ë³µ ì• ë‹ˆë©”ì´ì…˜ì´ ì•ˆë˜ëŠ” ê²ƒ ê°™ê¸°ë„í•˜ê³ ... ë‹¤ìŒ ì†Œë§ˆë²• í”„ë¡œì íŠ¸ëŠ” ì• ë‹ˆë©”ì´ì…˜ì— ëŒ€í•´ì„œ ë‹¤ë¤„ë³¼ê¹Œ í•œë‹¤.
