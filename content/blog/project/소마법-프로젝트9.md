---
title: ğŸ”® ì†Œë§ˆë²• í”„ë¡œì íŠ¸ -9 (loading)
date: 2020-03-29 23:03:99
category: project
draft: false
---

**ìŠ¤í”Œë˜ì‹œ í™”ë©´**ê³¼ **ë°ì´í„° ë¡œë”© ì°½**ì„ êµ¬í˜„í•œ í¬ë¡¤ë§ì´ë¯¸ì§€ ì—´ëŒ ì–´í”Œë¦¬ì¼€ì´ì…˜

í¬ë¡¤ë§ì€ [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)ì— ìˆëŠ” í¬ë¡¤ë§ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ì˜€ë‹¤.

<hr/>

```toc
exclude: Table of Contents
from-heading: 1
to-heading: 5
```

# \#. Project Map

- :apple: <a href="https://small-magic-project.now.sh/" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸</a>

- :apple: <a href="https://small-magic-project.now.sh/loading" target="_blank">í”„ë¡œì íŠ¸ ì‚¬ì´íŠ¸/loading</a>

* :fire: <a href="https://github.com/taenykim/small-magic-project" target="_blank">í”„ë¡œì íŠ¸ ê¹ƒí—ˆë¸Œì†ŒìŠ¤</a>

<br/>

<details>
<summary>ì œì‘ë…¸íŠ¸ í•œëˆˆì—ë³´ê¸°[ì ‘ê¸°/í¼ì¹˜ê¸°]</summary>
<div markdown="1">

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 1 (container)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B81/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 2 (calculator)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B82/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 3 (graph)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B83/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 5 (today)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B85/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 6 (jjal)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B86/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 7 (avengers)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B87/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 8 (maskmap)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B88/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 9 (loading)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B89/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 10 (lazyloading)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B810/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 11 (music)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B811/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 12 (racingcar)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B812/)

- [ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 13 (lotto)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B813/)

  </div>
  </details>

# 1. ë ˆì´ì•„ì›ƒ

## 1-1. ìŠ¤í”Œë˜ì‹œ í™”ë©´

![](./images/loading1.png)

> LOADING í…ìŠ¤íŠ¸ì— ì• ë‹ˆë©”ì´ì…˜ì„ ì£¼ì—ˆë‹¤.

## 1-2. ë°ì´í„° ë¡œë”©í™”ë©´

![](./images/loading2.png)

> íšŒì „í•˜ëŠ” ì›í˜• ì—˜ë¦¬ë¨¼íŠ¸ ì• ë‹ˆë©”ì´ì…˜..

## 1-3. ë°ì´í„° ë¡œë”©ì™„ë£Œí™”ë©´

![](./images/loading3.png)

> "Hello cats!"

## 1-4. ì»´í¬ë„ŒíŠ¸

```jsx
<BackgroundContainer>
  <ContentsMenubar name="loading" />
  <MainLoader id="main_loader">
    <MainLoaderText transX="12px" delay="0.35s" color="firebrick">
      LOADING
    </MainLoaderText>
    <MainLoaderText transX="10px" delay="0.28s" color="darkgoldenrod">
      LOADING
    </MainLoaderText>
    <MainLoaderText transX="8px" delay="0.21s" color="darkolivegreen">
      LOADING
    </MainLoaderText>
    <MainLoaderText transX="6px" delay="0.14s" color="darksalmon">
      LOADING
    </MainLoaderText>
    <MainLoaderText transX="4px" delay="0.07s" color="cornflowerblue">
      LOADING
    </MainLoaderText>
    <MainLoaderText delay="0s" color="white">
      LOADING
    </MainLoaderText>
  </MainLoader>
  <Loader id="first_loader"></Loader>
  <Description>
    <p
      style={{
        fontSize: '20px',
        fontFamily: 'escore7',
        color: 'pink',
        textShadow: '2px 2px 4px black',
        textAlign: 'center',
      }}
    >
      ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í¬ë¡¤ë§ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì„¸ìš”
    </p>
    <p style={{ fontSize: '10px', fontFamily: 'escore5', marginTop: '10px' }}>
      Image data from{'  '}
      <a href="https://wall.alphacoders.com/" target="_blank">
        alphacoders.com
      </a>
    </p>
  </Description>
  <ButtonContainer>
    <button id="cat_button">ê³ ì–‘ì´(default)</button>
    <button id="dog_button">ê°•ì•„ì§€</button>
  </ButtonContainer>
  <TextContainer id="myDiv" style={{ display: 'none' }}>
    {imgArr.map((item, i) => {
      return <img key={i} src={item.img}></img>
    })}
  </TextContainer>
</BackgroundContainer>
```

ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” `styled-component`ë¡œ êµ¬ì„±í•˜ì˜€ë‹¤.

1. **MainLoader**, **MainLoaderText** : ìŠ¤í”Œë˜ì‹œ ë¡œë”©í™”ë©´

> í•œëˆˆì— ë³´ê¸° ì¢‹ì§€ ì•Šì•„ì„œ ì½”ë“œìŠ¤í”Œë¦¬íŒ…ì´ í•„ìš”í•´ë³´ì„ ã… ã…  setTimeout() ë©”ì†Œë“œë¡œ 3ì´ˆê°„ ì§€ì†ë˜ê²Œ í•´ì£¼ì—ˆë‹¤.

2. **Loader** : ë°ì´í„° ë¡œë”©í™”ë©´

> ë¡œë”©í™”ë©´ì€ div íƒœê·¸ë¡œ êµ¬ì„±í–ˆê³  fetchì˜ then ì²´ì´ë‹ìœ¼ë¡œ ë°ì´í„°ê°€ ë¶ˆëŸ¬ì™€ì§€ë©´ ë¡œë”©í™”ë©´ì´ ì‚¬ë¼ì§€ê³  ë°ì´í„°ì´ë¯¸ì§€ê°€ ë³´ì—¬ì§€ë„ë¡ í•´ì£¼ì—ˆë‹¤.

3. **Description** : ì„¤ëª…ì°½

> ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„¤ëª… ì°½

4. **ButtonContainer** : í¬ë¡¤ë§ í•¨ìˆ˜ ì‹¤í–‰ë²„íŠ¼

> ê³ ì–‘ì´ì™€ ê°•ì•„ì§€ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í¬ë¡¤ë§í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë²„íŠ¼ 2ê°œ Container

5. **TextContainer** : ì´ë¯¸ì§€ ë°ì´í„° ë·° Container

> í¬ë¡¤ë§í•œ ê³ ì–‘ì´ì™€ ê°•ì•„ì§€ ì´ë¯¸ì§€ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ë·° Container

> ì´ˆê¸° style ê°’ìœ¼ë¡œ `display:none`ì„ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

# 2. ìƒíƒœê´€ë¦¬

```js
const [imgLoadToggle, setImgLoadToggle] = useState(false)
const [imgArr, setImgArr] = useState([])
```

ìƒíƒœê´€ë¦¬ëŠ” ë¦¬ì•¡íŠ¸ hooksë¥¼ ì´ìš©í–ˆë‹¤.

1. **imgLoadToggle** : ì´ˆê¸°ë¡œë”© íŒë³„ ë³€ìˆ˜

> ì´ˆê¸° DOM ë¡œë“œì‹œ, í•œë²ˆë§Œ í¬ë¡¤ë§ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ boolean ë³€ìˆ˜ë¥¼ ë‘ì—ˆë‹¤.

2. **imgArr** : ì´ë¯¸ì§€ê°€ ì €ì¥ë  ë°°ì—´

> í¬ë¡¤ë§ëœ ì´ë¯¸ì§€ ë°ì´í„°ë“¤ì´ ì €ì¥ë˜ëŠ” ë°°ì—´

# 3. ë¡œë”©ë°”

## 3-1. ìŠ¤í”Œë˜ì‹œ

ì›¹í˜ì´ì§€ ì´ˆê¸° ì§„ì…ì‹œ, ì‹¤í–‰ë˜ëŠ” ìŠ¤í”Œë˜ì‹œ í™”ë©´.

```js
const showFull = () => {
  document.getElementById('main_loader').style.display = 'none'
}
```

```js
useEffect(() => {
  if (!imgLoadToggle) {
    crawling('cat')
    setImgLoadToggle(true)
    setTimeout(showFull, 3000)
  }
})
```

useEffectë¡œ DOMì´ ë¡œë“œë˜ë©´ setTimeout()ìœ¼ë¡œ 3ì´ˆê°„ ìŠ¤í”Œë˜ì‹œ í™”ë©´ì´ ì‹¤í–‰ë˜ë„ë¡ í•´ì£¼ì—ˆë‹¤.

3ì´ˆê°€ ì§€ë‚˜ë©´, main_loader ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ display:none í•˜ì˜€ë‹¤.

ê·¸ë¦¬ê³  `setImgLoadToggle(true)`ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í–ˆë‹¤.

## 3-2. ë¡œë”©ë°”

```js
document.getElementById('cat_button').addEventListener('click', e => {
  e.stopImmediatePropagation()
  loadPage()
  crawling('cat')
})
document.getElementById('dog_button').addEventListener('click', e => {
  e.stopImmediatePropagation()
  loadPage()
  crawling('dog')
})
```

ìš°ì„  click ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡í•˜ê³  ì„¸ê°œì˜ í•¨ìˆ˜ ë° ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì¼€ í•˜ì˜€ë‹¤.

<hr/>

### :apple: e.stopImmediatePropagation()

```js
event.preventDefault()
// í˜„ì¬ ì´ë²¤íŠ¸ì˜ ê¸°ë³¸ ë™ì‘ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.

event.stopPropagation()
// í˜„ì¬ ì´ë²¤íŠ¸ê°€ ìƒìœ„ë¡œ ì „íŒŒë˜ì§€ ì•Šë„ë¡ ì¤‘ë‹¨í•©ë‹ˆë‹¤.

event.stopImmediatePropagation()
// í˜„ì¬ ì´ë²¤íŠ¸ê°€ ìƒìœ„ë¿ ì•„ë‹ˆë¼ í˜„ì¬ ë ˆë²¨ì— ê±¸ë¦° ë‹¤ë¥¸ ì´ë²¤íŠ¸ë„ ë™ì‘í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
```

ì¶œì²˜: [https://programmingsummaries.tistory.com/313](https://programmingsummaries.tistory.com/313)

**ì¤‘ìš”**

useEffectê°€ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰ë˜ë©° addEventListenerë„ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰ë˜ì„œ í¬ë¡¤ë§í•¨ìˆ˜ê°€ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰ë˜ì—ˆë‹¤.

ê·¸ë˜ì„œ `stopImmediatePropagation()` ë¥¼ í†µí•´ ë™ì¼ í•¨ìˆ˜ë¥¼ í•œë²ˆë§Œ ì‹¤í–‰í•˜ê²Œë” í•´ì£¼ì—ˆë‹¤.

<hr/>

### í˜ì´ì§€ ì»¨íŠ¸ë¡¤ loadPage(), showPage()

```js
const loadPage = () => {
  document.getElementById('first_loader').style.display = 'block'
  document.getElementById('myDiv').style.display = 'none'
}
const showPage = () => {
  document.getElementById('first_loader').style.display = 'none'
  document.getElementById('myDiv').style.display = 'flex'
}
```

í¬ë¡¤ë§ í•¨ìˆ˜ ì‹œì‘ì‹œ `loadPage()`ë¥¼ ì‹¤í–‰í•˜ê³ , ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ `showPage()`ë¥¼ ì‹¤í–‰í•˜ê²Œ í•˜ì˜€ë‹¤.

ê°ê°ì˜ í•¨ìˆ˜ë¥¼ í†µí•´ ë¡œë”©ë°” ì—˜ë¦¬ë¨¼íŠ¸ì™€ ë°ì´í„° ë·° ì—˜ë¦¬ë¨¼íŠ¸ displayë¥¼ ì¡°ì •í•´ì£¼ì—ˆë‹¤.

<hr/>

### crawling()

AJAXëŠ” fetchë¥¼ ì‚¬ìš©í–ˆê³ , ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” then ë©”ì†Œë“œ ì²´ì´ë‹ì„ ì‚¬ìš©í–ˆë‹¤.

í¬ë¡¤ë§í•¨ìˆ˜ë„ ì´ì „ì— ë°°ê²½í™”ë©´ í¬ë¡¤ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ crawling()í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ì˜€ë‹¤.

[ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

```js
fetch(url)
  .then //...
  ()
  .then(json => {
    setImgArr(json)
    showPage()
  })
```

ê·¸ë¦¬ê³  ë°ì´í„°ê°€ ëª¨ë‘ ì½ì–´ì§€ë©´, hooksë¥¼ í†µí•´ imgArrì— ì´ë¯¸ì§€ë“¤ì„ ì €ì¥í•˜ê³  showPage()ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ì˜€ë‹¤.

<hr/>

# 4. css ì• ë‹ˆë©”ì´ì…˜

css ì• ë‹ˆë©”ì´ì…˜ì€ styled-componentsì™€ keyframesë¥¼ ì´ìš©í–ˆë‹¤.

`ìŠ¤í”Œë˜ì‹œ í™”ë©´`, `ë°ì´í„° ë¡œë”©ë°”`, `ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ë·°` ì´ 3ê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ì— ì• ë‹ˆë©”ì´ì…˜ì„ ì£¼ì—ˆë‹¤.

## 4-1. ìŠ¤í”Œë˜ì‹œ ì• ë‹ˆë©”ì´ì…˜

> í‚¤í”„ë ˆì„

```js
const customAni = keyframes`
0%, 100% {
  transform: translatey(0); 
 }
 50% {
  transform: translatey(20px);
 }
`
```

> ìŠ¤íƒ€ì¼

```js
const MainLoaderText = styled.div`
  position: absolute;
  font-size: 32px;
  text-shadow: 2px 2px 4px black;
  font-family: escore9;
  color: ${props => {
    return props.color
  }};
  animation: ${customAni} 1.5s ease-in-out infinite;
  animation-delay: ${props => {
    return props.delay
  }};
  margin-left: ${props => {
    return props.transX
  }};
`
```

> ì»´í¬ë„ŒíŠ¸

```jsx
<MainLoaderText transX="12px" delay="0.35s" color="firebrick">
  LOADING
</MainLoaderText>
```

styled-components ì˜ propsë¡œ transX, delay, colorë¥¼ ë„£ì–´ì£¼ì—ˆë‹¤.

ê·¸ë¦¬ê³  animationì€ `transform: translatey()`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

<hr/>

## 4-2. ë¡œë”©ë°” ì• ë‹ˆë©”ì´ì…˜

> í‚¤í”„ë ˆì„

```js
const spin = keyframes`
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
`
```

> ìŠ¤íƒ€ì¼

```js
const Loader = styled.div`
  position: fixed;
  top: 50%;
  left: 50%;
  border: 8px solid #f3f3f3;
  border-top: 8px solid #3498db;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  transform: translate(-50%, -50%);
  animation: ${spin} 2s linear infinite;
`
```

> ì»´í¬ë„ŒíŠ¸

```js
<Loader id="first_loader"></Loader>
```

ë¨¼ì € **top:50%, left:50%**ì™€ **transform: translate(-50%, -50%)**ë¥¼ í†µí•˜ì—¬ ì—˜ë¦¬ë¨¼íŠ¸ê°€ í™”ë©´ ì¤‘ì•™ì— ì˜¤ê²Œ í•˜ì˜€ë‹¤.

ê·¸ë¦¬ê³  animationì€ `transform: rotate()`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

<hr/>

## 4-3. ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ë·°

> í‚¤í”„ë ˆì„

```js
const positionbottom = keyframes`
  from{ margin-top:150px; opacity:0 } 
  to{ margin-top:100px; opacity:1 }
`
```

> ìŠ¤íƒ€ì¼

```js
const TextContainer = styled.div`
  margin-top: 100px;
  width: 100vw;
  justify-content: center;
  flex-wrap: wrap;
  animation: ${positionbottom} 1s linear;
`
```

> ì»´í¬ë„ŒíŠ¸

```js
<TextContainer id="myDiv" style={{ display: 'none' }}>
  {imgArr.map((item, i) => {
    return <img key={i} src={item.img}></img>
  })}
</TextContainer>
```

<hr/>

animationì€ marginê°’ê³¼ opacityë¥¼ ì‚¬ìš©í•´ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤ë¥´ë¥µ ì˜¬ë¼ì˜¤ëŠ” íš¨ê³¼ë¥¼ ì£¼ì—ˆë‹¤.

# 5. ê°œì¸ì ì¸ í”¼ë“œë°±

## 5-1. lazy loading X

[ì†Œë§ˆë²• í”„ë¡œì íŠ¸ - 10 (lazyloading)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B810/)
